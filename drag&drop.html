<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de Clasificaci√≥n de Formas (Drag & Drop)</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuraci√≥n de color y fuente Inter -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Estilos personalizados para las formas y la animaci√≥n de arrastre */
        body {
            font-family: 'Inter', sans-serif;
        }
        
        /* Estilo para el cursor de arrastre */
        .draggable {
            cursor: grab;
            transition: transform 0.2s, opacity 0.2s, box-shadow 0.2s;
        }

        /* Clase a√±adida cuando se arrastra un elemento */
        .dragging {
            opacity: 0.5;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
            transform: scale(1.05);
            cursor: grabbing;
        }

        /* Clase a√±adida cuando se pasa el cursor sobre una zona de soltar */
        .drag-over {
            border-color: #34d399 !important; /* Tailwind green-400 */
            background-color: #f0fdf4; /* Tailwind green-50 */
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-center p-4">

    <div id="game-container" class="w-full max-w-4xl bg-white p-6 md:p-10 rounded-xl shadow-2xl">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-2 flex items-center justify-center gap-3">
            Clasificador de Formas 
            <!-- Aqu√≠ se inserta el logo. REEMPLAZA la URL 'https://placehold.co/32x32' por la ruta real de tu imagen (ej. 'logo.png') -->
            <img 
                src="logo.png" 
                alt="Logo del Juego" 
                class="inline w-8 h-8 text-indigo-600 rounded-full"
                onerror="this.onerror=null;this.src='';this.alt='üß©';"
            >
        </h1>
        <p class="text-center text-gray-500 mb-8">Arrastra cada figura a la zona de destino con el mismo color.</p>

        <!-- Contenedor de Formas Arrastrables -->
        <div id="draggable-area" class="flex flex-wrap justify-center gap-6 p-4 mb-10 bg-indigo-50 rounded-lg shadow-inner border border-indigo-200">
            <!-- Las figuras se insertar√°n aqu√≠ por JS -->
        </div>

        <!-- Contenedor de Zonas de Soltar (Dropzones) -->
        <div id="dropzone-area" class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Zona de Soltar: Cuadrado (Rojo) -->
            <div id="square-drop" data-shape="square" class="dropzone h-40 border-4 border-dashed border-red-300 bg-red-50 rounded-xl flex flex-col items-center justify-center text-red-700 font-semibold transition-all">
                <span class="text-xl">Zona para Cuadrado</span>
                <span class="text-sm text-red-500 mt-1">Arrastra aqu√≠</span>
            </div>

            <!-- Zona de Soltar: C√≠rculo (Azul) -->
            <div id="circle-drop" data-shape="circle" class="dropzone h-40 border-4 border-dashed border-blue-300 bg-blue-50 rounded-full flex flex-col items-center justify-center text-blue-700 font-semibold transition-all">
                <span class="text-xl">Zona para C√≠rculo</span>
                <span class="text-sm text-blue-500 mt-1">Arrastra aqu√≠</span>
            </div>

            <!-- Zona de Soltar: Tri√°ngulo (Verde) -->
            <div id="triangle-drop" data-shape="triangle" class="dropzone h-40 border-4 border-dashed border-green-300 bg-green-50 rounded-xl flex flex-col items-center justify-center text-green-700 font-semibold transition-all">
                <span class="text-xl">Zona para Tri√°ngulo</span>
                <span class="text-sm text-green-500 mt-1">Arrastra aqu√≠</span>
            </div>
        </div>

        <!-- Mensaje de Resultado -->
        <div id="message-box" class="mt-8 text-center p-4 bg-yellow-100 border border-yellow-300 rounded-lg hidden">
            <p class="text-lg font-medium text-yellow-800">¬°Sigue intent√°ndolo!</p>
        </div>
        
        <!-- Bot√≥n de Reinicio -->
        <div class="text-center mt-8">
            <button id="reset-button" class="px-6 py-3 bg-indigo-600 text-white font-bold rounded-lg shadow-md hover:bg-indigo-700 transition duration-150">
                Reiniciar Juego
            </button>
        </div>
    </div>

    <script>
        // --- L√ìGICA JAVASCRIPT DEL JUEGO ---

        const draggableArea = document.getElementById('draggable-area');
        const dropzoneArea = document.getElementById('dropzone-area');
        const dropzones = document.querySelectorAll('.dropzone');
        const resetButton = document.getElementById('reset-button');
        const messageBox = document.getElementById('message-box');
        
        let correctDrops = 0;
        const totalShapes = 3;

        // Definici√≥n de las figuras
        const shapes = [
            { id: 'draggable-square', type: 'square', color: 'bg-red-500', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="w-16 h-16 text-white" viewBox="0 0 24 24" fill="currentColor"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></svg>' },
            { id: 'draggable-circle', type: 'circle', color: 'bg-blue-500', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="w-16 h-16 text-white" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10"></circle></svg>' },
            { id: 'draggable-triangle', type: 'triangle', color: 'bg-green-500', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="w-16 h-16 text-white" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2 L2 22 L22 22 Z"/></svg>' }
        ];

        // Funci√≥n para renderizar las figuras arrastrables
        function renderShapes() {
            // Limpia el √°rea de figuras
            draggableArea.innerHTML = '';
            
            // Renderiza cada figura
            shapes.forEach(shape => {
                const div = document.createElement('div');
                div.id = shape.id;
                div.setAttribute('data-shape', shape.type);
                div.setAttribute('draggable', 'true');
                div.className = `draggable ${shape.color} w-24 h-24 flex items-center justify-center rounded-lg shadow-lg`;
                div.innerHTML = shape.icon;
                draggableArea.appendChild(div);
            });

            // Re-adjuntar listeners de arrastre a las nuevas figuras
            attachDragListeners();
        }

        // Funci√≥n para adjuntar los listeners de arrastre
        function attachDragListeners() {
            document.querySelectorAll('.draggable').forEach(item => {
                // Evento de inicio de arrastre
                item.addEventListener('dragstart', (e) => {
                    // Guarda el ID y el tipo de forma en el DataTransfer
                    e.dataTransfer.setData('text/plain', e.target.id);
                    e.dataTransfer.setData('text/shape', e.target.getAttribute('data-shape'));
                    e.target.classList.add('dragging');
                });
            
                // Evento de fin de arrastre
                item.addEventListener('dragend', (e) => {
                    e.target.classList.remove('dragging');
                });
            });
        }

        // Funci√≥n principal de manejo del evento 'drop'
        function handleDrop(e) {
            e.preventDefault();
            const dropzone = e.currentTarget;
            dropzone.classList.remove('drag-over');

            // 1. Obtener la data del elemento arrastrado
            const draggedId = e.dataTransfer.getData('text/plain');
            const draggedShape = e.dataTransfer.getData('text/shape');
            const targetShape = dropzone.getAttribute('data-shape');
            const element = document.getElementById(draggedId);

            if (!element) return; // Si no hay elemento, salir

            // 2. Comprobar si es la zona correcta
            if (draggedShape === targetShape) {
                // √âxito:
                if (element.parentNode === draggableArea) { // Solo si viene del √°rea inicial
                    dropzone.appendChild(element);
                    element.classList.add('opacity-100', 'cursor-default');
                    element.removeAttribute('draggable');
                    
                    // Actualizar la zona de soltar
                    dropzone.innerHTML = `<span class="text-2xl font-bold">¬°CORRECTO!</span>`;
                    dropzone.classList.remove('border-dashed');
                    dropzone.classList.add('border-solid', 'bg-white', 'shadow-inner');

                    correctDrops++;
                    checkWinCondition();
                }
            } else {
                // Fallo:
                showMessage('¬°Forma incorrecta! Intenta de nuevo.');
                // Regresar visualmente el elemento (esto lo hace el navegador por defecto)
            }
        }

        // Funci√≥n para mostrar mensajes
        function showMessage(text, isSuccess = false) {
            messageBox.textContent = text;
            // Corregido el SyntaxError: Eliminada la coma ilegal en la llamada a classList.add
            messageBox.classList.remove('bg-yellow-100', 'border-yellow-300', 'bg-green-100', 'border-green-300');
            
            if (isSuccess) {
                messageBox.classList.add('bg-green-100', 'border-green-300');
            } else {
                messageBox.classList.add('bg-yellow-100', 'border-yellow-300');
            }
            messageBox.classList.remove('hidden'); // Mostrar la caja de mensaje
            
            setTimeout(() => {
                messageBox.classList.add('hidden');
            }, 3000);
        }

        // Funci√≥n para comprobar si se ha ganado
        function checkWinCondition() {
            if (correctDrops === totalShapes) {
                dropzoneArea.classList.add('opacity-50'); // Efecto visual
                showMessage('üéâ ¬°Felicidades! Has clasificado todas las formas correctamente. üéâ', true);
            }
        }

        // Inicializar los listeners de las zonas de soltar
        dropzones.forEach(zone => {
            // Prevenir comportamiento por defecto
            zone.addEventListener('dragover', (e) => {
                e.preventDefault();
                zone.classList.add('drag-over');
            });

            zone.addEventListener('dragleave', () => {
                zone.classList.remove('drag-over');
            });
            
            zone.addEventListener('drop', handleDrop);
        });

        // Evento del bot√≥n de reinicio
        resetButton.addEventListener('click', () => {
            correctDrops = 0;
            dropzoneArea.classList.remove('opacity-50');
            
            // Restaurar zonas de soltar
            document.getElementById('square-drop').innerHTML = '<span class="text-xl">Zona para Cuadrado</span><span class="text-sm text-red-500 mt-1">Arrastra aqu√≠</span>';
            document.getElementById('circle-drop').innerHTML = '<span class="text-xl">Zona para C√≠rculo</span><span class="text-sm text-blue-500 mt-1">Arrastra aqu√≠</span>';
            document.getElementById('triangle-drop').innerHTML = '<span class="text-xl">Zona para Tri√°ngulo</span><span class="text-sm text-green-500 mt-1">Arrastra aqu√≠</span>';
            
            dropzones.forEach(zone => {
                zone.classList.add('border-dashed');
                zone.classList.remove('border-solid', 'bg-white', 'shadow-inner');
            });

            // Volver a renderizar las formas arrastrables
            renderShapes();
            
            showMessage('Juego Reiniciado. ¬°Empieza de nuevo!');
        });

        // Inicializar el juego al cargar la p√°gina
        window.onload = renderShapes;
    </script>
</body>
</html>
